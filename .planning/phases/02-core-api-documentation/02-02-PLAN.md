---
phase: 02-core-api-documentation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - skills/polymarket/market-discovery/search-and-filtering.md
  - skills/polymarket/market-discovery/events-and-metadata.md
autonomous: true

must_haves:
  truths:
    - "Documentation explains search and filter patterns for markets"
    - "Documentation covers pagination for large result sets"
    - "Documentation explains all market metadata fields including resolution status"
    - "Code examples demonstrate keyword search, category filtering, and pagination"
  artifacts:
    - path: "skills/polymarket/market-discovery/search-and-filtering.md"
      provides: "Search, filter, and pagination patterns"
      min_lines: 100
    - path: "skills/polymarket/market-discovery/events-and-metadata.md"
      provides: "Event and market metadata field reference"
      min_lines: 80
  key_links:
    - from: "skills/polymarket/market-discovery/search-and-filtering.md"
      to: "fetching-markets.md"
      via: "builds on basic fetching patterns"
      pattern: "fetching-markets"
---

<objective>
Complete market discovery documentation with search/filter patterns, pagination, and comprehensive metadata field reference.

Purpose: Enable Claude to find specific markets using search, filter by category/status, handle large result sets, and understand all metadata fields. Covers GAMMA-02 (metadata), GAMMA-03 (search/filter), GAMMA-04 (pagination).

Output: Two skill files completing the market-discovery skill folder.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-core-api-documentation/02-RESEARCH.md

# Reference Phase 1 style and Plan 01 work
@skills/polymarket/auth/README.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create search and filtering documentation</name>
  <files>skills/polymarket/market-discovery/search-and-filtering.md</files>
  <action>
Create comprehensive search and filtering documentation (GAMMA-03, GAMMA-04) covering:

1. **Keyword Search:**
   ```python
   # Search events by text
   response = requests.get(f"{GAMMA_URL}/events", params={
       "q": "election",  # Search term
       "active": "true"
   })
   ```
   - Note: search is across title, description, and slug

2. **Category Filtering:**
   ```python
   # Filter by category/tag
   response = requests.get(f"{GAMMA_URL}/markets", params={
       "tag_id": 15,  # Specific category
       "active": "true"
   })
   ```
   - Document known tag IDs if available (Politics, Sports, Crypto, etc.)
   - Note tag discovery via /tags endpoint if exists

3. **Status Filtering:**
   - active=true/false - Currently tradeable
   - closed=true/false - Market has ended
   - Document combination behaviors (active AND closed)

4. **Sorting Options:**
   - order: id, created, updated, volume, liquidity
   - ascending: true (oldest first) / false (newest first)
   - Default sorting behavior

5. **Pagination Patterns (GAMMA-04):**
   ```python
   def fetch_all_events(limit=50):
       """Generator that handles pagination."""
       offset = 0
       while True:
           response = requests.get(f"{GAMMA_URL}/events", params={
               "active": "true",
               "limit": limit,
               "offset": offset
           })
           batch = response.json()

           if not batch:
               break

           yield from batch

           if len(batch) < limit:
               break

           offset += limit

   # Usage
   for event in fetch_all_events():
       process(event)
   ```

6. **Combined Query Example:**
   Show realistic search combining keyword + category + status + pagination

7. **Rate Limiting Considerations:**
   - Implement delays between paginated requests
   - Cache frequently accessed data
   - Use bulk queries where possible
  </action>
  <verify>File exists at skills/polymarket/market-discovery/search-and-filtering.md with 100+ lines, includes keyword search, category filtering, status filtering, and pagination examples</verify>
  <done>Complete search and filtering documentation with pagination patterns for large result sets</done>
</task>

<task type="auto">
  <name>Task 2: Create events and metadata reference</name>
  <files>skills/polymarket/market-discovery/events-and-metadata.md</files>
  <action>
Create comprehensive metadata field reference (GAMMA-02) covering:

1. **Event Fields Reference Table:**
   | Field | Type | Description | Example |
   |-------|------|-------------|---------|
   | id | string | Unique event identifier | "16085" |
   | slug | string | URL-friendly name | "fed-decision-october" |
   | title | string | Human-readable title | "Fed Rate Decision October 2024" |
   | description | string | Full event description | ... |
   | active | boolean | Currently tradeable | true |
   | closed | boolean | Trading ended | false |
   | archived | boolean | Hidden from UI | false |
   | negRisk | boolean | Multi-outcome market | false |
   | markets | array | Nested market objects | [...] |
   | volume | string | Total volume traded | "1234567.89" |
   | liquidity | string | Current liquidity | "50000.00" |

2. **Market Fields Reference Table:**
   | Field | Type | Description | Example |
   |-------|------|-------------|---------|
   | conditionId | string | CLOB condition identifier | "0x123..." |
   | clobTokenIds | array | [YES_token, NO_token] | ["71321...", "72541..."] |
   | question | string | Market question | "Will X happen?" |
   | outcomes | array | Outcome names | ["Yes", "No"] |
   | outcomePrices | array | Current prices | ["0.65", "0.35"] |
   | endDate | string | Market end timestamp | "2024-12-31T00:00:00Z" |
   | resolutionSource | string | Resolution authority | "Official announcement" |

3. **Resolution Status Fields (GAMMA-02 specific):**
   - Document all resolution-related fields
   - resolvedAt, resolution, winner
   - How to detect: open, closed-pending, resolved states

4. **NegRisk Multi-Outcome Markets:**
   - What negRisk: true means
   - How markets relate in multi-outcome events
   - Capital efficiency implications (covered more in Phase 3)

5. **Outcome Interpretation:**
   - outcomes[0] corresponds to clobTokenIds[0] (typically YES)
   - outcomePrices interpretation (probability as decimal)
   - How prices relate to trading odds

6. **Time Fields:**
   - createdAt, updatedAt timestamps
   - endDate interpretation and timezone
   - Resolution timing patterns
  </action>
  <verify>File exists at skills/polymarket/market-discovery/events-and-metadata.md with 80+ lines, includes event fields table, market fields table, resolution status documentation</verify>
  <done>Complete metadata reference with all event and market fields documented including resolution status</done>
</task>

</tasks>

<verification>
After completion:
- skills/polymarket/market-discovery/search-and-filtering.md covers GAMMA-03 and GAMMA-04
- skills/polymarket/market-discovery/events-and-metadata.md covers GAMMA-02
- Market discovery skill folder is complete (5 files including README and Plan 01 files)
</verification>

<success_criteria>
1. Search patterns documented (keyword, category, status filtering)
2. Pagination pattern with generator example works for large datasets
3. All event metadata fields documented with types and descriptions
4. All market metadata fields documented with types and descriptions
5. Resolution status fields clearly explained
6. NegRisk multi-outcome pattern introduced
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-api-documentation/02-02-SUMMARY.md`

Update skills/polymarket/market-discovery/README.md to add links to new files.
</output>
