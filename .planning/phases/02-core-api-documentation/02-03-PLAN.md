---
phase: 02-core-api-documentation
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - skills/polymarket/trading/README.md
  - skills/polymarket/trading/clob-api-overview.md
  - skills/polymarket/trading/order-types.md
autonomous: true

must_haves:
  truths:
    - "Documentation explains CLOB API base URL and authentication requirements"
    - "Documentation covers all four order types (GTC, GTD, FOK, FAK)"
    - "Documentation explains precision requirements by order type"
    - "Code examples demonstrate creating each order type"
  artifacts:
    - path: "skills/polymarket/trading/README.md"
      provides: "Index for trading skill"
      min_lines: 60
    - path: "skills/polymarket/trading/clob-api-overview.md"
      provides: "CLOB API architecture and authentication"
      min_lines: 80
    - path: "skills/polymarket/trading/order-types.md"
      provides: "GTC, GTD, FOK, FAK order documentation"
      min_lines: 120
  key_links:
    - from: "skills/polymarket/trading/README.md"
      to: "clob-api-overview.md, order-types.md"
      via: "documentation index links"
      pattern: "\\[.*\\]\\(\\./.*\\.md\\)"
    - from: "skills/polymarket/trading/clob-api-overview.md"
      to: "skills/polymarket/auth/"
      via: "authentication reference"
      pattern: "auth.*authentication"
---

<objective>
Document the CLOB API fundamentals and order types for trading operations.

Purpose: Enable Claude to understand CLOB API architecture and choose the correct order type for any trading scenario. Covers CLOB-01 (GTC orders) and CLOB-05 (FOK, FAK, GTD orders) requirements.

Output: Three skill files in skills/polymarket/trading/ covering CLOB basics and order types.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-core-api-documentation/02-RESEARCH.md

# Reference Phase 1 auth docs and style
@skills/polymarket/auth/README.md
@skills/polymarket/auth/client-initialization.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create CLOB API overview documentation</name>
  <files>skills/polymarket/trading/clob-api-overview.md</files>
  <action>
Create comprehensive CLOB API overview documentation covering:

1. **API Basics:**
   - Base URL: `https://clob.polymarket.com`
   - Purpose: Central Limit Order Book for trading operations
   - Requires L2 authentication for write operations (order placement, cancellation)
   - Read operations (prices, orderbook) available without auth

2. **Authentication Reference:**
   - Link to auth skill: `../auth/client-initialization.md`
   - Quick reminder: need `client.set_api_creds(creds)` before authenticated calls
   - Authenticated endpoints use POLY-* headers

3. **Key Endpoints Overview:**

   **Public (no auth):**
   - GET /price - Current price for token
   - GET /midpoint - Midpoint price
   - GET /book - Full orderbook
   - GET /tick-size - Current tick size
   - GET /prices-history - Historical prices

   **Authenticated (L2 auth):**
   - POST /order - Place order
   - DELETE /order/{orderId} - Cancel order
   - GET /orders - Get user's orders
   - GET /order/{orderId} - Get specific order
   - POST /orders - Batch order placement
   - DELETE /orders - Batch cancellation

4. **Client Library Usage:**
   ```python
   from py_clob_client.client import ClobClient

   client = ClobClient(
       host="https://clob.polymarket.com",
       key=PRIVATE_KEY,
       chain_id=137,
       signature_type=0,  # or 1 for proxy
       funder=WALLET_ADDRESS
   )
   client.set_api_creds(client.create_or_derive_api_creds())

   # Public methods (no auth needed)
   price = client.get_price(token_id, side="BUY")
   book = client.get_order_book(token_id)
   tick_size = client.get_tick_size(token_id)

   # Authenticated methods
   order = client.create_order(order_args)
   response = client.post_order(order, order_type)
   ```

5. **Token ID Context:**
   - Token IDs come from Gamma API (clobTokenIds)
   - YES token typically at index 0, NO at index 1
   - Cross-reference to market-discovery skill

6. **Error Response Patterns:**
   - 400: Invalid request (bad parameters, precision)
   - 401: Authentication failed
   - 404: Order/resource not found
   - 429: Rate limited
  </action>
  <verify>File exists at skills/polymarket/trading/clob-api-overview.md with 80+ lines covering API basics, endpoints (public and authenticated), and client library usage</verify>
  <done>CLOB API overview documented with endpoint reference, authentication requirements, and basic client usage</done>
</task>

<task type="auto">
  <name>Task 2: Create order types documentation</name>
  <files>skills/polymarket/trading/order-types.md</files>
  <action>
Create comprehensive order types documentation (CLOB-01, CLOB-05) covering:

1. **Order Type Overview Table:**
   | Type | Name | Execution | Partial Fills | Use Case |
   |------|------|-----------|---------------|----------|
   | GTC | Good Till Cancelled | Rests on book | Allowed | Limit orders, patient trading |
   | GTD | Good Till Date | Rests until expiry | Allowed | Time-sensitive limits |
   | FOK | Fill or Kill | Immediate only | NOT allowed | All-or-nothing execution |
   | FAK | Fill and Kill | Immediate only | Allowed | Market orders, best effort |

2. **GTC Orders (Good Till Cancelled) - CLOB-01:**
   ```python
   from py_clob_client.clob_types import OrderArgs, OrderType
   from py_clob_client.order_builder.constants import BUY, SELL

   # Standard limit order - rests on book until filled or cancelled
   order_args = OrderArgs(
       price=0.45,      # Limit price (0.01 to 0.99)
       size=100.0,      # Number of shares
       side=BUY,        # BUY or SELL
       token_id=token_id
   )
   signed_order = client.create_order(order_args)
   response = client.post_order(signed_order, OrderType.GTC)
   ```
   - Default order type for limit orders
   - Remains active until filled or cancelled
   - Allows partial fills over time
   - Standard decimal precision requirements

3. **GTD Orders (Good Till Date):**
   ```python
   import time

   # Limit order with expiration
   expiration = int(time.time()) + 3600  # Expires in 1 hour

   order_args = OrderArgs(
       price=0.45,
       size=100.0,
       side=BUY,
       token_id=token_id,
       expiration=expiration  # Unix timestamp
   )
   signed_order = client.create_order(order_args)
   response = client.post_order(signed_order, OrderType.GTD)
   ```
   - Must be at least 1 minute in future
   - Auto-cancelled at expiration
   - Useful for time-sensitive trading strategies

4. **FOK Orders (Fill or Kill):**
   ```python
   # All-or-nothing immediate execution
   order_args = OrderArgs(
       price=0.45,
       size=100.0,  # Must round to 2 decimal places!
       side=BUY,
       token_id=token_id
   )
   signed_order = client.create_order(order_args)
   response = client.post_order(signed_order, OrderType.FOK)
   ```
   **CRITICAL - Precision Requirements:**
   - Maker amount: max 2 decimals
   - Taker amount: max 4 decimals
   - Size x price product: max 2 decimals
   - **If precision fails, order rejected with "invalid amounts" error**
   - Use GTC for orders requiring more precision

5. **FAK Orders (Fill and Kill):**
   ```python
   # Best-effort immediate execution, partial fills OK
   order_args = OrderArgs(
       price=0.45,
       size=100.0,
       side=BUY,
       token_id=token_id
   )
   signed_order = client.create_order(order_args)
   response = client.post_order(signed_order, OrderType.FAK)
   ```
   - Executes immediately at best available prices
   - Accepts partial fills (unlike FOK)
   - Unfilled portion is cancelled
   - Used for market-style orders

6. **Order Type Decision Tree:**
   ```
   Do you need immediate execution?
   ├─ No → Use GTC or GTD
   │  └─ Time limit needed? → GTD (with expiration)
   │  └─ No time limit? → GTC
   │
   └─ Yes → Use FOK or FAK
      └─ Must fill completely? → FOK (strict precision!)
      └─ Partial fills OK? → FAK
   ```

7. **Response Schema:**
   Document order response fields:
   - success, orderId, status (live, matched, delayed)
   - size_matched, price_average
   - errorMsg (when failed)
  </action>
  <verify>File exists at skills/polymarket/trading/order-types.md with 120+ lines, includes all four order types with code examples, precision requirements for FOK, and decision tree</verify>
  <done>Complete order types documentation with GTC, GTD, FOK, FAK examples, precision requirements, and selection guidance</done>
</task>

<task type="auto">
  <name>Task 3: Create trading README index</name>
  <files>skills/polymarket/trading/README.md</files>
  <action>
Create README index for trading skill following Phase 1 README style:

1. **Quick Start:**
   - Fastest path to placing first order
   - Code snippet showing basic GTC order
   - Link to order-types.md for alternatives

2. **Prerequisites:**
   - Authenticated ClobClient (link to ../auth/)
   - Token ID from market discovery (link to ../market-discovery/)
   - USDC.e balance for buying
   - Position for selling

3. **Documentation Index:**
   Table with columns: Document | Purpose | When to Read
   - clob-api-overview.md - API architecture and endpoints - First time setup
   - order-types.md - GTC, GTD, FOK, FAK orders - Choosing order type
   - (placeholder for order-placement.md - Plan 04)
   - (placeholder for order-management.md - Plan 04)
   - (placeholder for positions-and-balances.md - Plan 04)

4. **Order Type Quick Reference:**
   | Scenario | Order Type | Why |
   |----------|------------|-----|
   | Limit order, wait for price | GTC | Standard, patient |
   | Time-limited opportunity | GTD | Auto-expires |
   | Must fill completely NOW | FOK | All-or-nothing |
   | Market order, any fill OK | FAK | Best effort |

5. **Common Issues:**
   - FOK precision errors: Use GTC or round size to 2 decimals
   - Order rejected: Check tick size with `client.get_tick_size()`
   - Authentication failed: Ensure `set_api_creds()` called

6. **Related Skills:**
   - Authentication (../auth/) - Required for order placement
   - Market Discovery (../market-discovery/) - Get token IDs
   - Real-Time Data (../real-time/) - Price updates
   - Data Analytics (../data-analytics/) - Position tracking

Include "Last updated" footer with date and "Status: In Progress - Phase 2" note.
  </action>
  <verify>File exists at skills/polymarket/trading/README.md with 60+ lines, has quick start, documentation index, order type quick reference, and follows Phase 1 format</verify>
  <done>Trading README provides navigation index and quick start for trading operations</done>
</task>

</tasks>

<verification>
All three files created in skills/polymarket/trading/:
- clob-api-overview.md explains CLOB architecture and endpoints
- order-types.md covers all four order types with precision requirements
- README.md provides skill index and quick start

Code examples use py-clob-client library patterns from research.
</verification>

<success_criteria>
1. skills/polymarket/trading/ directory exists with 3 files
2. CLOB API authentication requirements clearly documented
3. All four order types (GTC, GTD, FOK, FAK) documented with examples
4. FOK precision requirements prominently documented
5. Decision tree helps users choose correct order type
6. Cross-references to auth and market-discovery skills established
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-api-documentation/02-03-SUMMARY.md`
</output>
