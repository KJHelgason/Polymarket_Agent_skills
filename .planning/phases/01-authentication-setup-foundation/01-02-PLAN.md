---
phase: 01-authentication-setup-foundation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - skills/polymarket/auth/wallet-types.md
  - skills/polymarket/auth/token-allowances.md
autonomous: true

must_haves:
  truths:
    - "Claude can determine if a user has EOA or proxy wallet from their description"
    - "Claude knows signature_type values: 0=EOA, 1=Magic/email, 2=Gnosis Safe"
    - "Claude knows funder parameter must be proxy address for proxy wallets"
    - "Claude can explain USDC.e vs native USDC difference"
    - "Claude knows the three contracts that need allowances"
  artifacts:
    - path: "skills/polymarket/auth/wallet-types.md"
      provides: "Wallet type detection and configuration documentation"
      contains: "signature_type"
    - path: "skills/polymarket/auth/token-allowances.md"
      provides: "Token allowance setup documentation"
      contains: "0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"
  key_links:
    - from: "skills/polymarket/auth/wallet-types.md"
      to: "skills/polymarket/auth/token-allowances.md"
      via: "EOA wallets need manual allowances"
      pattern: "token-allowances"
---

<objective>
Document wallet type detection (EOA vs proxy) and USDC.e token allowance setup for Polymarket trading.

Purpose: These are the two most common sources of setup failures - wrong signature type and missing token allowances.
Output: Two markdown skill files covering wallet patterns and token setup.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-authentication-setup-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Wallet Types Documentation</name>
  <files>skills/polymarket/auth/wallet-types.md</files>
  <action>
Create documentation explaining wallet type detection and configuration:

**Structure:**
1. Overview - Why wallet type matters (signature_type, funder parameters)
2. Wallet Type Reference Table
   | Type | signature_type | funder | Use Case |
   |------|----------------|--------|----------|
   | EOA | 0 | wallet address | MetaMask, hardware wallets |
   | Magic/Email | 1 | proxy address | Polymarket.com email login |
   | Gnosis Safe | 2 | Safe address | Multi-sig setups |
3. Detection Method
   - How to tell if you have a proxy wallet
   - Profile address vs EOA address check
   - Code example for detection
4. Proxy Wallet Architecture
   - Signing key vs funding address concept
   - Why EOA controls but proxy holds funds
   - How to find proxy address (Polymarket profile, or derivation)
5. Proxy Address Derivation (reference only)
   - TypeScript implementation exists (CREATE2)
   - Python: no official implementation, use Polymarket UI
6. Common Errors
   - "Invalid signature" - wrong signature_type
   - Using funder=EOA for proxy wallets
   - Checking allowances on EOA instead of proxy

**Source:** Draw from 01-RESEARCH.md Pattern 1, Pattern 4, Common Pitfalls #1.

**Format:** Claude skill markdown with decision tree for wallet type selection.
  </action>
  <verify>
- File exists at skills/polymarket/auth/wallet-types.md
- Contains signature_type reference (0, 1, 2)
- Includes detection code example
- Explains funder parameter for each wallet type
- No placeholder text or TODOs
  </verify>
  <done>
Documentation enables Claude to guide users through wallet type detection and correct parameter selection. Requirement AUTH-02 satisfied.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Token Allowance Documentation</name>
  <files>skills/polymarket/auth/token-allowances.md</files>
  <action>
Create documentation covering USDC.e and token allowance setup:

**Structure:**
1. Overview - Why allowances are needed (ERC-20/ERC-1155 approval model)
2. USDC.e vs Native USDC
   - USDC.e address: 0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174 (CORRECT)
   - Native USDC address: 0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359 (WRONG)
   - Why confusion exists (exchanges default to native USDC now)
   - How to detect which token you have (balance check code)
   - Resolution: "Activate Funds" in UI or manual swap
3. Required Allowances
   - Three exchange contracts:
     - CTF Exchange: 0x4bFb41d5B3570DeFd03C39a9A4D8dE6Bd8B8982E
     - Neg Risk Exchange: 0xC5d563A36AE78145C45a50134d48A1215220f80a
     - Neg Risk Adapter: 0xd91E80cF2E7be2e162c6513ceD06f1dD0dA35296
   - Two token types need approval:
     - USDC.e (ERC-20 approve)
     - Conditional Tokens CTF (ERC-1155 setApprovalForAll)
4. Who Needs Allowances
   - EOA wallets: YES - must set manually
   - Proxy/Safe wallets: NO - handled automatically
5. Setup Code
   - Complete Python example for setting allowances
   - Uses MaxUint256 for unlimited approval
   - Requires POL/MATIC for gas
6. Checking Existing Allowances
   - Code to verify allowances are set
   - What to look for before first trade

**Warning signs to document:**
- Polygon wallet shows USDC balance, Polymarket shows $0.00
- Order placement fails after successful auth
- "insufficient allowance" or "transfer amount exceeds allowance" errors

**Source:** Draw from 01-RESEARCH.md Pattern 3, Common Pitfalls #2 and #4.

**Format:** Claude skill markdown with complete code examples and contract addresses.
  </action>
  <verify>
- File exists at skills/polymarket/auth/token-allowances.md
- Contains USDC.e address (0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174)
- Contains all three exchange contract addresses
- Includes balance check code for USDC.e vs native USDC
- Includes allowance setup code
- No placeholder text or TODOs
  </verify>
  <done>
Documentation covers USDC.e token setup and allowance configuration for EOA wallets. Requirement AUTH-04 satisfied.
  </done>
</task>

</tasks>

<verification>
After both tasks complete:
1. Both files exist in skills/polymarket/auth/
2. Wallet types doc references token allowances appropriately (EOA needs them)
3. All contract addresses are correct per research
4. USDC.e address is prominently featured (common confusion point)
</verification>

<success_criteria>
- AUTH-02 (wallet patterns) documented with detection method
- AUTH-04 (token allowances) documented with setup code
- Both files are complete, no TODOs or placeholders
- Contract addresses verified against research
</success_criteria>

<output>
After completion, create `.planning/phases/01-authentication-setup-foundation/01-02-SUMMARY.md`
</output>
